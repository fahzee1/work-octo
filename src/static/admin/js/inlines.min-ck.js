(function(e){e.fn.formset=function(t){var n=e.extend({},e.fn.formset.defaults,t),r=function(t,n,r){var i=new RegExp("("+n+"-(\\d+|__prefix__))");n=n+"-"+r;e(t).attr("for")&&e(t).attr("for",e(t).attr("for").replace(i,n));t.id&&(t.id=t.id.replace(i,n));t.name&&(t.name=t.name.replace(i,n))};t=e("#id_"+n.prefix+"-TOTAL_FORMS").attr("autocomplete","off");var i=parseInt(t.val()),s=e("#id_"+n.prefix+"-MAX_NUM_FORMS").attr("autocomplete","off");t=s.val()==""||s.val()-t.val()>0;e(this).each(function(){e(this).not("."+n.emptyCssClass).addClass(n.formCssClass)});if(e(this).length&&t){var o;if(e(this).attr("tagName")=="TR"){t=this.eq(0).children().length;e(this).parent().append('<tr class="'+n.addCssClass+'"><td colspan="'+t+'"><a href="javascript:void(0)">'+n.addText+"</a></tr>");o=e(this).parent().find("tr:last a")}else{e(this).filter(":last").after('<div class="'+n.addCssClass+'"><a href="javascript:void(0)">'+n.addText+"</a></div>");o=e(this).filter(":last").next().find("a")}o.click(function(){var t=e("#id_"+n.prefix+"-TOTAL_FORMS"),u=e("#"+n.prefix+"-empty"),f=u.clone(!0);f.removeClass(n.emptyCssClass).addClass(n.formCssClass).attr("id",n.prefix+"-"+i);f.is("tr")?f.children(":last").append('<div><a class="'+n.deleteCssClass+'" href="javascript:void(0)">'+n.deleteText+"</a></div>"):f.is("ul")||f.is("ol")?f.append('<li><a class="'+n.deleteCssClass+'" href="javascript:void(0)">'+n.deleteText+"</a></li>"):f.children(":first").append('<span><a class="'+n.deleteCssClass+'" href="javascript:void(0)">'+n.deleteText+"</a></span>");f.find("*").each(function(){r(this,n.prefix,t.val())});f.insertBefore(e(u));e(t).val(parseInt(t.val())+1);i+=1;s.val()!=""&&s.val()-t.val()<=0&&o.parent().hide();f.find("a."+n.deleteCssClass).click(function(){var t=e(this).parents("."+n.formCssClass);t.remove();i-=1;n.removed&&n.removed(t);t=e("."+n.formCssClass);e("#id_"+n.prefix+"-TOTAL_FORMS").val(t.length);(s.val()==""||s.val()-t.length>0)&&o.parent().show();for(var u=0,f=t.length;u<f;u++){r(e(t).get(u),n.prefix,u);e(t.get(u)).find("*").each(function(){r(this,n.prefix,u)})}return!1});n.added&&n.added(f);return!1})}return this};e.fn.formset.defaults={prefix:"form",addText:"add another",deleteText:"remove",addCssClass:"add-row",deleteCssClass:"delete-row",emptyCssClass:"empty-row",formCssClass:"dynamic-form",added:null,removed:null}})(django.jQuery);