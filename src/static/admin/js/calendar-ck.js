/*
calendar.js - Calendar functions by Adrian Holovaty
*/function removeChildren(e){while(e.hasChildNodes())e.removeChild(e.lastChild)}function quickElement(){var e=document.createElement(arguments[0]);if(arguments[2]!=""&&arguments[2]!=null){var t=document.createTextNode(arguments[2]);e.appendChild(t)}var n=arguments.length;for(var r=3;r<n;r+=2)e.setAttribute(arguments[r],arguments[r+1]);arguments[1].appendChild(e);return e}function Calendar(e,t){this.div_id=e;this.callback=t;this.today=new Date;this.currentMonth=this.today.getMonth()+1;this.currentYear=this.today.getFullYear()}var CalendarNamespace={monthsOfYear:gettext("January February March April May June July August September October November December").split(" "),daysOfWeek:gettext("S M T W T F S").split(" "),firstDayOfWeek:parseInt(get_format("FIRST_DAY_OF_WEEK")),isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},getDaysInMonth:function(e,t){var n;e==1||e==3||e==5||e==7||e==8||e==10||e==12?n=31:e==4||e==6||e==9||e==11?n=30:e==2&&CalendarNamespace.isLeapYear(t)?n=29:n=28;return n},draw:function(e,t,n,r){var i=new Date,s=i.getDate(),o=i.getMonth()+1,u=i.getFullYear(),a="";e=parseInt(e);t=parseInt(t);var f=document.getElementById(n);removeChildren(f);var l=document.createElement("table");quickElement("caption",l,CalendarNamespace.monthsOfYear[e-1]+" "+t);var c=quickElement("tbody",l),h=quickElement("tr",c);for(var p=0;p<7;p++)quickElement("th",h,CalendarNamespace.daysOfWeek[(p+CalendarNamespace.firstDayOfWeek)%7]);var d=(new Date(t,e-1,1-CalendarNamespace.firstDayOfWeek)).getDay(),v=CalendarNamespace.getDaysInMonth(e,t);h=quickElement("tr",c);for(var p=0;p<d;p++){var m=quickElement("td",h," ");m.style.backgroundColor="#f3f3f3"}var g=1;for(var p=d;g<=v;p++){p%7==0&&g!=1&&(h=quickElement("tr",c));g==s&&e==o&&t==u?a="today":a="";var y=quickElement("td",h,"","class",a);quickElement("a",y,g,"href","javascript:void("+r+"("+t+","+e+","+g+"));");g++}while(h.childNodes.length<7){var m=quickElement("td",h," ");m.style.backgroundColor="#f3f3f3"}f.appendChild(l)}};Calendar.prototype={drawCurrent:function(){CalendarNamespace.draw(this.currentMonth,this.currentYear,this.div_id,this.callback)},drawDate:function(e,t){this.currentMonth=e;this.currentYear=t;this.drawCurrent()},drawPreviousMonth:function(){if(this.currentMonth==1){this.currentMonth=12;this.currentYear--}else this.currentMonth--;this.drawCurrent()},drawNextMonth:function(){if(this.currentMonth==12){this.currentMonth=1;this.currentYear++}else this.currentMonth++;this.drawCurrent()},drawPreviousYear:function(){this.currentYear--;this.drawCurrent()},drawNextYear:function(){this.currentYear++;this.drawCurrent()}};